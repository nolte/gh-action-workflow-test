name: Debug Workflow
on:
  issues:
    types:
      - labeled
      - unlabeled

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2


    - uses: actions/github-script@0.8.0
      id: latest_release
      with:
        github-token: ${{secrets.GITHUB_TOKEN}}
        #result-encoding: string
        script: |
          const releases =  await github.repos.getLatestRelease({
            owner: context.repo.owner,
            repo: context.repo.repo
          })
          return releases
    - run: |
        echo "${{ steps.latest_release.outputs.result }}"
    - name: Create changelog
      uses: nolte/github-action/utils/changeLog@feature/shasum
      with:
        CHANGELOG_GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        CHANGELOG_GITHUB_PROJECT: "${{ github.event.repository.name }}"
        CHANGELOG_GITHUB_SINCE_TAG: "${{ steps.latest_release.outputs.result }}"
        CHANGELOG_GITHUB_USER: "${{ github.event.repository.owner.login }}"

    - name: Read Pre Release Version from File
      id: pre_release_version
      uses: traversals-analytics-and-intelligence/file-reader-action@master
      with:
        file: /github/workspace/CHANGELOG.md
    - run: |
        echo "${{ steps.pre_release_version.outputs.content }}"
